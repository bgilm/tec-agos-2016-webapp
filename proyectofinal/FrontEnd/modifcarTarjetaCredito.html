<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="app/styles/main.css">
    <!-- endbuild -->
  </head>
  <body>
      <div ng-app="prueba" ng-controller="MainCtrl">
        <form ng-submit="altaCuenta()">
      <div class="form-group">
        <label for="banco">Banco:</label>
        <input type="text" class="form-control" id="banco">
      </div>
        <div class="form-group">
            <label for="numero_tarjeta">Numero de tarjeta:</label>
            <input type="number" class="form-control" id="numero_tarjeta">
        </div>
            <div class="form-group">
            <label for="limite_credito">Limite de credito:</label>
            <input type="number" class="form-control" id="limite_credito">
        </div>
        <div class="form-group">
            <label for="tasa_interes">Tasa de interes:</label>
            <input type="text" class="form-control" id="tasa_interes">
        </div>
        <div class="form-group">
            <label for="alias">Alias:</label>
            <input type="number" class="form-control" id="alias">
        </div>
        <div class="form-group">
            <label for="saldo">Saldo:</label>
            <input type="text" class="form-control" id="saldo">
        </div>
        <div class="form-group">
            <label for="fecha_corte">Fecha de corte:</label>
            <input type="date" class="form-control" id="fecha_corte">
        </div>
            <input type="submit" value="Registrar">
        </form>
      
         </div>
    
     <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/angular-touch/angular-touch.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

        <!-- build:js({.tmp,app}) scripts/scripts.js -->

        <!-- endbuild -->
      
    <script>
         var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}

        var encodedString = Base64.encode('1:4hc-3cd13925d758704bffe4');
        //var username= document.getElementById("username").value;
        
            
       
        console.log(encodedString); // Outputs: "SGVsbG8gV29ybGQh"
        var app = angular.module("prueba", []);
        app.controller('MainCtrl', function ($scope,$http) {
//            $http({ method: 'POST', 
//                    url: 'http://localhost:8000/cuenta/Registrar',
//                    headers:{
//                      Authorization:'Basic '+encodedString,
//                    },
//                    data:{username:'admin',
//                          banco:'HSBC',
//                          numero_cuenta: '123',
//                          clabe:'123',
//                          tipo_cuenta:'Cuenta de ahorros',
//                          monto:'123',
//                          t_tarjeta_debito:'True',
//                          num_tarjeta:'123',
//                          tasa_inflacion:'123',
//                          plazo:'123',
//                    }
//                  })
            $scope.altaCuenta = function(){
                var pk = 1;
                var banco=document.getElementById("banco").value;
                var numero_tarjeta=document.getElementById("numero_tarjeta").value;
                var limite_credito=document.getElementById("limite_credito").value;
                var tasa_interes=document.getElementById("tasa_interes").value;
                var alias=document.getElementById("alias").value;
                var fecha_corte =document.getElementById("fecha_corte").value;
                var saldo =document.getElementById("saldo").value;        
        var req = {
            method: 'PUT',
            url: 'http://localhost:8000/perfil/tarjeta/modificar/'+pk,
              data:{username:'admin',
                          banco:banco,
                          numero_tarjeta: numero_tarjeta,
                          limite_credito:limite_credito,
                          tasa_interes:tasa_interes,
                          alias:alias,
                          fecha_corte:fecha_corte,
                          saldo:saldo,
                    },
           
            headers: {
                'Authorization':'Basic '+encodedString
            }
          
            }
             $http(req).then(function successCallback(response) {
                        console.log("Success"+response)
                  }, function errorCallback(response) {
                        console.log("Error"+response)
            });
            }
        });

       

    </script>
  </body>   
</html>